@model dacn.Models.NguoiDung
@{
    Layout = "~/Views/Shared/AuthLayout.cshtml";
    ViewBag.Title = "Đăng ký";
}

<div class="login-container">
    <div class="login-card">
        <div class="text-center">
            <div class="login-icon">
                <i class="bi bi-wallet2 fs-1 text-primary"></i>
            </div>
            <h3 class="mb-3">Theo dõi Chi tiêu Cá nhân</h3>
            <p class="text-muted mb-4">Tạo tài khoản mới</p>
        </div>

        @using (Html.BeginForm("Create", "NguoiDungs", FormMethod.Post, new { @class = "login-form" }))
        {
            @Html.AntiForgeryToken()

            <div class="mb-3">
                <div class="form-floating">
                    @Html.TextBoxFor(model => model.TenDangNhap, new { @class = "form-control", placeholder = " ", required = "required" })
                    <i class="bi bi-person-fill input-icon"></i>
                    <label for="TenDangNhap">Tên đăng nhập</label>
                    @Html.ValidationMessageFor(model => model.TenDangNhap, "", new { @class = "text-danger small mt-1" })
                </div>
            </div>

            <div class="mb-3">
                <div class="form-floating">
                    @Html.PasswordFor(model => model.MatKhau, new { @class = "form-control", placeholder = " ", required = "required" })
                    <i class="bi bi-lock-fill input-icon"></i>
                    <i class="bi bi-eye-slash password-toggle" id="togglePassword"></i>
                    <label for="MatKhau">Mật khẩu</label>
                    @Html.ValidationMessageFor(model => model.MatKhau, "", new { @class = "text-danger small mt-1" })
                </div>
            </div>

            <div class="mb-4">
                <div class="form-floating">
                    @Html.TextBoxFor(model => model.HoTen, new { @class = "form-control", placeholder = " ", required = "required" })
                    <i class="bi bi-person-badge-fill input-icon"></i>
                    <label for="HoTen">Họ và tên</label>
                    @Html.ValidationMessageFor(model => model.HoTen, "", new { @class = "text-danger small mt-1" })
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100 login-button">Tạo tài khoản</button>

            <div class="text-center mt-4">
                <p class="mb-0">
                    Đã có tài khoản?
                    <a href="@Url.Action("DangNhap","NguoiDungs")" class="text-decoration-none">Đăng nhập ngay</a>
                </p>
            </div>
        }

        <div class="copyright-section">
            <p class="copyright-text">© 2025 - Chào mừng đến với hệ thống theo dõi chi tiêu cá nhân</p>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.getElementById('togglePassword').addEventListener('click', function () {
            const passwordInput = document.querySelector('input[name="MatKhau"]');
            const toggleIcon = this;

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.classList.remove('bi-eye-slash');
                toggleIcon.classList.add('bi-eye');
            } else {
                passwordInput.type = 'password';
                toggleIcon.classList.remove('bi-eye');
                toggleIcon.classList.add('bi-eye-slash');
            }
        });

        // Thêm hiệu ứng cho tất cả các input
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });

            input.addEventListener('blur', function() {
                if (!this.value) {
                    this.parentElement.classList.remove('focused');
                }
            });

            // Kiểm tra nếu input có giá trị sẵn (trong trường hợp validation fail)
            if (input.value) {
                input.parentElement.classList.add('focused');
            }
        });
    </script>
}